<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>LXG</title>
  <subtitle>Above and Beyond.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-01-14T07:03:26.035Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Xinguang Liu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Enjoy</title>
    <link href="http://yoursite.com/2017/01/14/beautiful-pic-1/"/>
    <id>http://yoursite.com/2017/01/14/beautiful-pic-1/</id>
    <published>2017-01-14T05:01:11.212Z</published>
    <updated>2017-01-14T07:03:26.035Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/vfun94cuy4o-david-marcu.jpg" alt=""></p>
<a id="more"></a>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="https://music.163.com/outchain/player?type=2&id=28947001&auto=1&height=66"></iframe>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/vfun94cuy4o-david-marcu.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="pic" scheme="http://yoursite.com/categories/pic/"/>
    
    
      <category term="pic" scheme="http://yoursite.com/tags/pic/"/>
    
      <category term="traveling" scheme="http://yoursite.com/tags/traveling/"/>
    
  </entry>
  
  <entry>
    <title>R机器学习中的包工头-Mlr包</title>
    <link href="http://yoursite.com/2017/01/13/R%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B8%AD%E7%9A%84%E5%8C%85%E5%B7%A5%E5%A4%B4-mlr%E5%8C%85/"/>
    <id>http://yoursite.com/2017/01/13/R机器学习中的包工头-mlr包/</id>
    <published>2017-01-13T13:14:06.326Z</published>
    <updated>2017-01-13T13:17:00.587Z</updated>
    
    <content type="html"><![CDATA[<h2 id="测试后的感想"><a href="#测试后的感想" class="headerlink" title="测试后的感想"></a>测试后的感想</h2><p>之前<code>R</code>中的机器学习领域的包一直是各有各的小山头，且新山头不断，于是我们需要追包，追一个个新出的包和包的更新，这时候最大的问题是你不知道还有其它算法的存在，且每个包有自己的包处理方式…</p>
<a id="more"></a>
<p>这就好比盖一个房子时，我们需要自己去找泥瓦匠、小工和管道工等，这时候面临三个问题：</p>
<ul>
<li>盖房子都需要哪些工种？</li>
<li>去哪里找这些工种对应的能手?</li>
<li>各工种之间如何配合干活？</li>
</ul>
<p>现在<code>mlr</code>包提供一个通用平台，就好比一个包工头，盖房子时，只要找到这个包工头，说要盖个房子，包工头会考虑下面的事情：</p>
<ul>
<li>盖一个什么样的房子，根据房子类型，建立一个<code>task</code>；</li>
<li>盖这个房子需要什么技能，确定一个方法<code>learner</code>；</li>
<li>需要准备什么材料，如何切割处理，定义一个处理策略<code>resampling strategy</code>；</li>
<li>协调大家搭伙干活<code>Do the resampling</code>;</li>
<li>评估下大家干活质量<code>performance and benchmark</code>;</li>
</ul>
<p>在这个基础上，还可以根据过往干活<code>train</code>的效果预测将来的状况<code>predict</code>，内部流程优化引入并行处理<code>parallelization</code>，以示公平展示工资待遇与干活质量之间的关联规则<code>visualization</code>，及其它黑技能。</p>
<h2 id="例：一个小回归"><a href="#例：一个小回归" class="headerlink" title="例：一个小回归"></a>例：一个小回归</h2><p>分析<code>mlbench</code>包<code>BostonHousing</code>数据中<code>medv</code>与其它变量之间的关系。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(mlr, quietly = <span class="literal">TRUE</span>)</div><div class="line"></div><div class="line"><span class="comment">## 数据集</span></div><div class="line">data(BostonHousing, package = <span class="string">"mlbench"</span>)</div><div class="line"></div><div class="line"><span class="comment">## 创建一个回归任务</span></div><div class="line">regr.task = makeRegrTask(id = <span class="string">"bh"</span>, data = BostonHousing, target = <span class="string">"medv"</span>)</div><div class="line"><span class="comment"># regr.task</span></div><div class="line"></div><div class="line"><span class="comment">## 定义回归方法</span></div><div class="line">regr.lrn = makeLearner(<span class="string">"regr.gbm"</span>, par.vals = list(n.trees = <span class="number">500</span>, interaction.depth = <span class="number">3</span>))</div><div class="line"><span class="comment"># regr.lrn</span></div><div class="line"></div><div class="line"><span class="comment">## 定义样本策略</span></div><div class="line">rdesc = makeResampleDesc(<span class="string">"CV"</span>, iters = <span class="number">3</span>)</div><div class="line"><span class="comment"># rdesc</span></div><div class="line"></div><div class="line"><span class="comment">## 计算</span></div><div class="line">r = resample(learner = regr.lrn, task = regr.task, resampling = rdesc, models = <span class="literal">TRUE</span>, </div><div class="line">    show.info = <span class="literal">FALSE</span>)</div><div class="line"></div><div class="line"><span class="comment">## 性能一览</span></div><div class="line">r</div><div class="line"><span class="comment">#&gt; Resample Result</span></div><div class="line"><span class="comment">#&gt; Task: bh</span></div><div class="line"><span class="comment">#&gt; Learner: regr.gbm</span></div><div class="line"><span class="comment">#&gt; mse.aggr: 47.18</span></div><div class="line"><span class="comment">#&gt; mse.mean: 47.18</span></div><div class="line"><span class="comment">#&gt; mse.sd: 13.33</span></div><div class="line"><span class="comment">#&gt; Runtime: 0.542031</span></div></pre></td></tr></table></figure>
<p>上面只是其基本流程，这个中间还可以穿插很多其它的部分，比如变量特征选择、多模型比较、性能展示等. </p>
<blockquote>
<p><code>All depends on your thinking and imagination.</code></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;测试后的感想&quot;&gt;&lt;a href=&quot;#测试后的感想&quot; class=&quot;headerlink&quot; title=&quot;测试后的感想&quot;&gt;&lt;/a&gt;测试后的感想&lt;/h2&gt;&lt;p&gt;之前&lt;code&gt;R&lt;/code&gt;中的机器学习领域的包一直是各有各的小山头，且新山头不断，于是我们需要追包，追一个个新出的包和包的更新，这时候最大的问题是你不知道还有其它算法的存在，且每个包有自己的包处理方式…&lt;/p&gt;
    
    </summary>
    
      <category term="machine-learning" scheme="http://yoursite.com/categories/machine-learning/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/machine-learning/R/"/>
    
    
      <category term="R 包" scheme="http://yoursite.com/tags/R-%E5%8C%85/"/>
    
      <category term="mlr" scheme="http://yoursite.com/tags/mlr/"/>
    
  </entry>
  
  <entry>
    <title>Win 7 中用 Putty 远程连接 Ubuntu 16</title>
    <link href="http://yoursite.com/2017/01/13/win7-to-Ubuntu16-by-putty/"/>
    <id>http://yoursite.com/2017/01/13/win7-to-Ubuntu16-by-putty/</id>
    <published>2017-01-13T10:07:09.441Z</published>
    <updated>2017-01-13T10:10:41.619Z</updated>
    
    <content type="html"><![CDATA[<h2 id="查看有没有安装SSH-server"><a href="#查看有没有安装SSH-server" class="headerlink" title="查看有没有安装SSH server"></a>查看有没有安装SSH server</h2><p>刚安装好<code>Ubuntu 16.04</code>系统之后，查看系统中是否已经安装<code>SSH server</code>，</p>
<pre><code>dpkg -l | grep ssh
</code></pre><p>or,</p>
<pre><code>ps -e | grep sshd
</code></pre><a id="more"></a>
<h2 id="安装SSH-server"><a href="#安装SSH-server" class="headerlink" title="安装SSH server"></a>安装SSH server</h2><pre><code>sudo apt-get install ssh
</code></pre><p>如果此时安装不成功，通常需要更新系统，</p>
<pre><code>sudo apt-get update
</code></pre><p>通常安装之后，保持默认设置即可。</p>
<h2 id="win7上用putty连接"><a href="#win7上用putty连接" class="headerlink" title="win7上用putty连接"></a>win7上用putty连接</h2><p><img src="/figure/win7-to-Ubuntu16-by-putty/putty.png" alt=""></p>
<p>一般测试即可联通,</p>
<p><img src="/figure/win7-to-Ubuntu16-by-putty/putty-success.png" alt=""></p>
<h2 id="其它一些额外设置"><a href="#其它一些额外设置" class="headerlink" title="其它一些额外设置"></a>其它一些额外设置</h2><h3 id="启动服务器"><a href="#启动服务器" class="headerlink" title="启动服务器"></a>启动服务器</h3><pre><code>/etc/init.d/ssh stop #停止
/etc/init.d/ssh start #启动
/etc/init.d/ssh restart #重启
</code></pre><h3 id="SSH配置"><a href="#SSH配置" class="headerlink" title="SSH配置"></a>SSH配置</h3><p>修改配置文件，</p>
<pre><code>sudo gedit /etc/ssh/sshd_config
</code></pre><p>并重启服务，</p>
<pre><code>/etc/init.d/ssh restart
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;查看有没有安装SSH-server&quot;&gt;&lt;a href=&quot;#查看有没有安装SSH-server&quot; class=&quot;headerlink&quot; title=&quot;查看有没有安装SSH server&quot;&gt;&lt;/a&gt;查看有没有安装SSH server&lt;/h2&gt;&lt;p&gt;刚安装好&lt;code&gt;Ubuntu 16.04&lt;/code&gt;系统之后，查看系统中是否已经安装&lt;code&gt;SSH server&lt;/code&gt;，&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;dpkg -l | grep ssh
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;or,&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ps -e | grep sshd
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="Win-2-Ubuntu" scheme="http://yoursite.com/categories/Win-2-Ubuntu/"/>
    
    
      <category term="Win7" scheme="http://yoursite.com/tags/Win7/"/>
    
      <category term="Ubuntu 16.04" scheme="http://yoursite.com/tags/Ubuntu-16-04/"/>
    
      <category term="远程连接" scheme="http://yoursite.com/tags/%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>Win7 远程VNC桌面控制 Ubuntu16.04</title>
    <link href="http://yoursite.com/2017/01/13/win7-VNC-to-Ubuntu16/"/>
    <id>http://yoursite.com/2017/01/13/win7-VNC-to-Ubuntu16/</id>
    <published>2017-01-13T09:30:46.243Z</published>
    <updated>2017-01-13T09:38:25.779Z</updated>
    
    <content type="html"><![CDATA[<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>主机系统<code>win7</code>, 用<code>VBox</code>安装<code>Ubuntu 16.04</code>虚拟机。</p>
<h2 id="开启远程桌面共享"><a href="#开启远程桌面共享" class="headerlink" title="开启远程桌面共享"></a>开启远程桌面共享</h2><p>在<code>/usr/share/applications</code>目录下打开”桌面共享”选项,</p>
<a id="more"></a>
<p><img src="/figure/win7-VNC-to-Ubuntu16/3.png" alt=""></p>
<p><img src="/figure/win7-VNC-to-Ubuntu16/4.png" alt=""></p>
<h2 id="安装dconf-editor"><a href="#安装dconf-editor" class="headerlink" title="安装dconf-editor"></a>安装dconf-editor</h2><pre><code>sudo apt-get install dconf-editor
</code></pre><h2 id="打开Dconf-editor做配置"><a href="#打开Dconf-editor做配置" class="headerlink" title="打开Dconf-editor做配置"></a>打开Dconf-editor做配置</h2><p><img src="/figure/win7-VNC-to-Ubuntu16/5.png" alt=""></p>
<p>路径：org &gt; gnome &gt; desktop &gt; remote-access</p>
<p><img src="/figure/win7-VNC-to-Ubuntu16/6.png" alt=""><br><img src="/figure/win7-VNC-to-Ubuntu16/7.png" alt=""></p>
<p>取消钩选 “requlre-encryption”属性</p>
<h2 id="win7上用VNC客户端连接"><a href="#win7上用VNC客户端连接" class="headerlink" title="win7上用VNC客户端连接"></a>win7上用VNC客户端连接</h2><p>输入IP地址 （端口默认5900）</p>
<p><img src="/figure/win7-VNC-to-Ubuntu16/2.png" alt=""></p>
<p><img src="/figure/win7-VNC-to-Ubuntu16/1.png" alt=""></p>
<p>连接成功。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h2&gt;&lt;p&gt;主机系统&lt;code&gt;win7&lt;/code&gt;, 用&lt;code&gt;VBox&lt;/code&gt;安装&lt;code&gt;Ubuntu 16.04&lt;/code&gt;虚拟机。&lt;/p&gt;
&lt;h2 id=&quot;开启远程桌面共享&quot;&gt;&lt;a href=&quot;#开启远程桌面共享&quot; class=&quot;headerlink&quot; title=&quot;开启远程桌面共享&quot;&gt;&lt;/a&gt;开启远程桌面共享&lt;/h2&gt;&lt;p&gt;在&lt;code&gt;/usr/share/applications&lt;/code&gt;目录下打开”桌面共享”选项,&lt;/p&gt;
    
    </summary>
    
      <category term="Win-2-Ubuntu" scheme="http://yoursite.com/categories/Win-2-Ubuntu/"/>
    
    
      <category term="Win7" scheme="http://yoursite.com/tags/Win7/"/>
    
      <category term="Ubuntu 16.04" scheme="http://yoursite.com/tags/Ubuntu-16-04/"/>
    
      <category term="桌面控制" scheme="http://yoursite.com/tags/%E6%A1%8C%E9%9D%A2%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>Win7 与 Ubuntu16.04 共享文件</title>
    <link href="http://yoursite.com/2017/01/13/win7-shareFolder-with-Ubuntu/"/>
    <id>http://yoursite.com/2017/01/13/win7-shareFolder-with-Ubuntu/</id>
    <published>2017-01-13T09:08:32.543Z</published>
    <updated>2017-01-13T09:38:54.867Z</updated>
    
    <content type="html"><![CDATA[<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>主机系统<code>win7</code>, 用<code>VBox</code>安装<code>Ubuntu 16.04</code>虚拟机。</p>
<a id="more"></a>
<p>安装增强功能时，有时出现以下错误，</p>
<p><img src="/figure/win7-shareFolder-with-Ubuntu/img5.png" alt=""></p>
<p>则</p>
<p><img src="/figure/win7-shareFolder-with-Ubuntu/img6.png" alt=""></p>
<p>之后重新安装即可。</p>
<h2 id="两个系统之间的文件传递有下面几种方法："><a href="#两个系统之间的文件传递有下面几种方法：" class="headerlink" title="两个系统之间的文件传递有下面几种方法："></a>两个系统之间的文件传递有下面几种方法：</h2><ol>
<li>设置双向的粘贴和拖放</li>
</ol>
<p><img src="/figure/win7-shareFolder-with-Ubuntu/img1.png" alt=""></p>
<ol>
<li>设置共享文件夹</li>
</ol>
<p><img src="/figure/win7-shareFolder-with-Ubuntu/img2.png" alt=""><br><img src="/figure/win7-shareFolder-with-Ubuntu/img3.png" alt=""></p>
<p>设置后之后，有时出现不能访问共享文件夹，则需要用用户名增加组别权限，</p>
<pre><code>sudo usermod -a -G vboxsf yourname
</code></pre><p>之后重启系统即可。</p>
<ol>
<li>用FTP协议</li>
</ol>
<p>以<code>WinSCP</code>为例</p>
<p><img src="/figure/win7-shareFolder-with-Ubuntu/img4.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;环境&quot;&gt;&lt;a href=&quot;#环境&quot; class=&quot;headerlink&quot; title=&quot;环境&quot;&gt;&lt;/a&gt;环境&lt;/h2&gt;&lt;p&gt;主机系统&lt;code&gt;win7&lt;/code&gt;, 用&lt;code&gt;VBox&lt;/code&gt;安装&lt;code&gt;Ubuntu 16.04&lt;/code&gt;虚拟机。&lt;/p&gt;
    
    </summary>
    
      <category term="Win-2-Ubuntu" scheme="http://yoursite.com/categories/Win-2-Ubuntu/"/>
    
    
      <category term="Win7" scheme="http://yoursite.com/tags/Win7/"/>
    
      <category term="Ubuntu 16.04" scheme="http://yoursite.com/tags/Ubuntu-16-04/"/>
    
      <category term="文件共享" scheme="http://yoursite.com/tags/%E6%96%87%E4%BB%B6%E5%85%B1%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Hello Hexo!</title>
    <link href="http://yoursite.com/2017/01/09/hello-hexo/"/>
    <id>http://yoursite.com/2017/01/09/hello-hexo/</id>
    <published>2017-01-09T10:31:01.866Z</published>
    <updated>2017-01-14T03:48:57.409Z</updated>
    
    <content type="html"><![CDATA[<p>今天开始转到Hexo，之前的就不搬迁了，这痛苦经历过的都知道…</p>
<a id="more"></a>
<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天开始转到Hexo，之前的就不搬迁了，这痛苦经历过的都知道…&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>每逢佳节倍思亲</title>
    <link href="http://yoursite.com/2016/12/25/%E6%AF%8F%E9%80%A2%E4%BD%B3%E8%8A%82%E5%80%8D%E6%80%9D%E4%BA%B2/"/>
    <id>http://yoursite.com/2016/12/25/每逢佳节倍思亲/</id>
    <published>2016-12-24T16:00:00.000Z</published>
    <updated>2017-01-14T04:43:21.922Z</updated>
    
    <content type="html"><![CDATA[<p><a href="./ID_20161213002758_54695.html" target="_blank">每逢佳节倍思亲</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;./ID_20161213002758_54695.html&quot; target=&quot;_blank&quot;&gt;每逢佳节倍思亲&lt;/a&gt;&lt;/p&gt;

    
    </summary>
    
      <category term="map" scheme="http://yoursite.com/categories/map/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/map/R/"/>
    
    
      <category term="R 包" scheme="http://yoursite.com/tags/R-%E5%8C%85/"/>
    
      <category term="REmap" scheme="http://yoursite.com/tags/REmap/"/>
    
  </entry>
  
  <entry>
    <title>不务正业：R语言读小说《近身兵王》</title>
    <link href="http://yoursite.com/2016/12/21/%E8%BF%91%E8%BA%AB%E5%85%B5%E7%8E%8B2/"/>
    <id>http://yoursite.com/2016/12/21/近身兵王2/</id>
    <published>2016-12-20T16:00:00.000Z</published>
    <updated>2017-01-14T07:04:04.835Z</updated>
    
    <content type="html"><![CDATA[<h1 id="写在前面的话"><a href="#写在前面的话" class="headerlink" title="写在前面的话"></a>写在前面的话</h1><p>前段时间比较辛苦，连着几周下来，终于该来的都来了，发烧、头疼加嗜睡，一样都不少，一天下来清醒的时候也不多，更新了个代码，还有点时间突然好想看个小说。<a id="more"></a>手机上随便打开一个，半小时一下就没了，贼啊，这书好看，网上搜索发现是《近身兵王》（秦渊），好评如潮，决定看完，但目录显示这是个连载，已经一千多章，这得猴年马月才能看完呢，我可只有这感冒的几天空挡…看来只能快速选着看了，但怎么来定位自己想要的章节呢，记起之前R会议上一个美女<a href="http://www.cnblogs.com/weibaar/p/4925399.html" target="_blank" rel="external">尾巴AR</a>介绍了用R读小说，这次也来试试看.</p>
<h1 id="数据导入"><a href="#数据导入" class="headerlink" title="数据导入"></a>数据导入</h1><h2 id="小说网上下载"><a href="#小说网上下载" class="headerlink" title="小说网上下载"></a>小说网上下载</h2><p><img src="/近身兵王2_files/figure-html/3.jpg" alt=""></p>
<p><a href="https://www.xiashu.cc/1222/down" target="_blank" rel="external">近身兵王.txt</a></p>
<p>下载放于项目目录下。</p>
<h2 id="语言环境设置"><a href="#语言环境设置" class="headerlink" title="语言环境设置"></a>语言环境设置</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 中文环境</span></div><div class="line">Sys.setlocale(<span class="string">"LC_CTYPE"</span>, <span class="string">"Chinese"</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#&gt; [1] &quot;Chinese (Simplified)_People&apos;s Republic of China.936&quot;</div></pre></td></tr></table></figure>
<h2 id="小说读入"><a href="#小说读入" class="headerlink" title="小说读入"></a>小说读入</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(readr)</div><div class="line"><span class="keyword">library</span>(stringr)</div><div class="line"><span class="keyword">library</span>(dplyr, quietly = <span class="literal">TRUE</span>, warn.conflicts = <span class="literal">FALSE</span>)</div><div class="line"></div><div class="line">JSBW &lt;- read_lines(<span class="string">"近身兵王.txt"</span>)</div><div class="line">head(JSBW, n = <span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#&gt;  [1] &quot;&lt;----------------------------------------------------------------&gt;&quot;</div><div class="line">#&gt;  [2] &quot;  温馨提示：您所阅读的小说来自【久久小说网】 www.99txt.cc&quot;         </div><div class="line">#&gt;  [3] &quot; 本网站没有弹窗可放心阅读&quot;                                         </div><div class="line">#&gt;  [4] &quot;&lt;----------------------------------------------------------------&gt;&quot;</div><div class="line">#&gt;  [5] &quot;&quot;                                                                  </div><div class="line">#&gt;  [6] &quot;  《近身兵王》&quot;                                                    </div><div class="line">#&gt;  [7] &quot;  连载阅读地址：http://www.99txt.cc/7902/&quot;                         </div><div class="line">#&gt;  [8] &quot;&quot;                                                                  </div><div class="line">#&gt;  [9] &quot;&quot;                                                                  </div><div class="line">#&gt; [10] &quot; 第1章 来世再做兄弟！&quot;</div></pre></td></tr></table></figure>
<h2 id="小说章节目录"><a href="#小说章节目录" class="headerlink" title="小说章节目录"></a>小说章节目录</h2><p>查看章节目录，并按目录分割为小文件。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Content &lt;- str_subset(JSBW, <span class="string">"第\\d*章"</span>) %&gt;% str_trim(side = <span class="string">"both"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 总章节数</span></div><div class="line">ContentNum &lt;- length(Content)</div><div class="line">ContentNum</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#&gt; [1] 1612</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 前10章目录</span></div><div class="line">head(Content, n = <span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">#&gt;  [1] &quot;第1章 来世再做兄弟！&quot;         &quot;第2章 色狼，你的手对哪摸呢？&quot;</div><div class="line">#&gt;  [3] &quot;第3章 英雄救美&quot;               &quot;第4章 一个打七个&quot;            </div><div class="line">#&gt;  [5] &quot;第5章 鲁雪晴的决定&quot;           &quot;第6章 你想包养老娘？&quot;        </div><div class="line">#&gt;  [7] &quot;第7章 痛打恶少&quot;               &quot;第8章 跟我回家&quot;              </div><div class="line">#&gt;  [9] &quot;第9章 撩人的小姨&quot;             &quot;第10章 裸睡的悲剧&quot;</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">write_lines(Content, <span class="string">"Content.txt"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 按章节分割 目录保存本地</span></div><div class="line"><span class="keyword">if</span> (!dir.exists(<span class="string">"章节目录"</span>)) &#123;</div><div class="line">    dir.create(<span class="string">"章节目录"</span>)</div><div class="line">&#125;</div><div class="line">ContentLocation &lt;- which(str_detect(JSBW, <span class="string">"第\\d*章"</span>))</div><div class="line">temp &lt;- c(ContentLocation, length(JSBW))</div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> seq_len(ContentNum)) &#123;</div><div class="line">    data &lt;- JSBW[temp[i]:(temp[i + <span class="number">1</span>] - <span class="number">1</span>)]</div><div class="line">    write_lines(data, paste0(<span class="string">"章节目录/"</span>, str_pad(i, width = <span class="number">4</span>, side = <span class="string">"left"</span>, </div><div class="line">        pad = <span class="string">"0"</span>), <span class="string">"-"</span>, Content[i], <span class="string">".txt"</span>))</div><div class="line">&#125;</div><div class="line">head(list.files(<span class="string">"章节目录"</span>), n = <span class="number">10</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">#&gt;  [1] &quot;0001-第1章 来世再做兄弟！.txt&quot;        </div><div class="line">#&gt;  [2] &quot;0002-第2章 色狼，你的手对哪摸呢？.txt&quot;</div><div class="line">#&gt;  [3] &quot;0003-第3章 英雄救美.txt&quot;              </div><div class="line">#&gt;  [4] &quot;0004-第4章 一个打七个.txt&quot;            </div><div class="line">#&gt;  [5] &quot;0005-第5章 鲁雪晴的决定.txt&quot;          </div><div class="line">#&gt;  [6] &quot;0006-第6章 你想包养老娘？.txt&quot;        </div><div class="line">#&gt;  [7] &quot;0007-第7章 痛打恶少.txt&quot;              </div><div class="line">#&gt;  [8] &quot;0008-第8章 跟我回家.txt&quot;              </div><div class="line">#&gt;  [9] &quot;0009-第9章 撩人的小姨.txt&quot;            </div><div class="line">#&gt; [10] &quot;0010-第10章 裸睡的悲剧.txt&quot;</div></pre></td></tr></table></figure>
<h2 id="人物段落"><a href="#人物段落" class="headerlink" title="人物段落"></a>人物段落</h2><p>查看某个人物出现的所有段落，以冷艳美女“易红月”为例：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Yhy &lt;- str_subset(JSBW, <span class="string">"易红月"</span>)</div><div class="line">head(Yhy)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#&gt; [1] &quot;    少女恍然，她能够分辨得出秦渊的茫然是否在做作，旋即轻声说道：“我叫易红月。”&quot;          </div><div class="line">#&gt; [2] &quot;    “易红月，很好听的名字。”秦渊毫不吝惜自己的赞美说道。&quot;                                </div><div class="line">#&gt; [3] &quot;    “谢谢！”易红月的声音优雅平静，说完再次转身面对着初升的朝阳。&quot;                        </div><div class="line">#&gt; [4] &quot;    秦渊发现，此刻的他居然不会说话了，就这么默默地站在易红月的背后，欣赏着这难得的画面。&quot;</div><div class="line">#&gt; [5] &quot;    秦渊不说话，易红月也不说话。&quot;                                                        </div><div class="line">#&gt; [6] &quot;    良久，易红月突然出声，又相似自言自语，“你喜欢看日出么？”&quot;</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 目录保存本地</span></div><div class="line"><span class="keyword">if</span> (!dir.exists(<span class="string">"人物章节"</span>)) &#123;</div><div class="line">    dir.create(<span class="string">"人物章节"</span>)</div><div class="line">&#125;</div><div class="line">write_lines(Yhy, <span class="string">"人物章节/易红月.txt"</span>)</div></pre></td></tr></table></figure>
<h2 id="人物互动"><a href="#人物互动" class="headerlink" title="人物互动"></a>人物互动</h2><p>同一个段落里面同时出现两个人的姓名， 以“易红月”和“秦渊”为例，</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Yhy.Qy &lt;- str_subset(JSBW, <span class="string">"(易红月.*秦渊)|(秦渊.*易红月)"</span>)</div><div class="line">head(Yhy.Qy)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">#&gt; [1] &quot;    少女恍然，她能够分辨得出秦渊的茫然是否在做作，旋即轻声说道：“我叫易红月。”&quot;          </div><div class="line">#&gt; [2] &quot;    “易红月，很好听的名字。”秦渊毫不吝惜自己的赞美说道。&quot;                                </div><div class="line">#&gt; [3] &quot;    秦渊发现，此刻的他居然不会说话了，就这么默默地站在易红月的背后，欣赏着这难得的画面。&quot;</div><div class="line">#&gt; [4] &quot;    秦渊不说话，易红月也不说话。&quot;                                                        </div><div class="line">#&gt; [5] &quot;    秦渊回神，旋即将目光从易红月身上转移，看向那万丈金光的太阳。&quot;                        </div><div class="line">#&gt; [6] &quot;    “为什么？”易红月再次转过身，看着秦渊时，眼神微微有些愕然。&quot;</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 目录保存本地</span></div><div class="line"><span class="keyword">if</span> (!dir.exists(<span class="string">"人物互动"</span>)) &#123;</div><div class="line">    dir.create(<span class="string">"人物互动"</span>)</div><div class="line">&#125;</div><div class="line">write_lines(Yhy.Qy, <span class="string">"人物互动/易红月-秦渊.txt"</span>)</div></pre></td></tr></table></figure>
<h2 id="人物出场场次"><a href="#人物出场场次" class="headerlink" title="人物出场场次"></a>人物出场场次</h2><p>人物众多，我只关心美女呵呵</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">meiNv &lt;- c(<span class="string">"苏倾月|曼陀罗"</span>, <span class="string">"叶云曼|小姨"</span>, <span class="string">"雪晴"</span>, <span class="string">"可卿"</span>, <span class="string">"李欣"</span>, <span class="string">"易红月"</span>, </div><div class="line">    <span class="string">"安倚桥"</span>, <span class="string">"纳兰明珠|茗珠"</span>, <span class="string">"左瑶"</span>, <span class="string">"左璃"</span>, <span class="string">"柳梦心"</span>, <span class="string">"何伊人"</span>, <span class="string">"洛樱"</span>)</div><div class="line"></div><div class="line">zhangJie.list &lt;- list.files(<span class="string">"章节目录"</span>)</div><div class="line">zhangJie.path &lt;- paste0(<span class="string">"章节目录/"</span>, zhangJie.list)</div><div class="line">zhangJie.all &lt;- lapply(zhangJie.path, read_lines)</div><div class="line"><span class="comment"># str(zhangJie.all)</span></div><div class="line"></div><div class="line"><span class="keyword">library</span>(tibble)</div><div class="line">zhangJie.sum &lt;- list(章节 = zhangJie.list)</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> seq_along(meiNv)) &#123;</div><div class="line">    zhangJie.sum[[i + <span class="number">1</span>]] &lt;- sapply(zhangJie.all, <span class="keyword">function</span>(str) &#123;</div><div class="line">        sum(str_count(str, meiNv[i]))</div><div class="line">    &#125;)</div><div class="line">&#125;</div><div class="line">names(zhangJie.sum)[-<span class="number">1</span>] &lt;- meiNv</div><div class="line"><span class="comment"># str(zhangJie.sum)</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">library</span>(DT)</div><div class="line"><span class="comment"># 生成人物-场次图，筛选排序找出关键章节</span></div><div class="line">datatable(as.data.frame(zhangJie.sum), options = list(paging = <span class="literal">TRUE</span>, pageLength = <span class="number">5</span>, </div><div class="line">    searching = <span class="literal">TRUE</span>), rownames = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 本地保存</span></div><div class="line">write.csv(as.data.frame(zhangJie.sum), <span class="string">"meiNv.csv"</span>, fileEncoding = <span class="string">"GB2312"</span>, </div><div class="line">    row.names = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<h2 id="人物关系网"><a href="#人物关系网" class="headerlink" title="人物关系网"></a>人物关系网</h2><p>看看男猪脚与美女之间的互动关系强弱：</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># # 读入所有的人物列表 nameAll &lt;- read_lines('人物姓名.txt') %&gt;%</span></div><div class="line"><span class="comment"># str_replace('\\d*', '') %&gt;% str_trim(side = 'left') %&gt;% str_c('（') %&gt;%</span></div><div class="line"><span class="comment"># str_match('.*?（') %&gt;% str_split('（') %&gt;% sapply(function(str) &#123; name &lt;-</span></div><div class="line"><span class="comment"># c(name, str[[1]]) &#125;) # 所有人物 nameAll</span></div><div class="line"></div><div class="line"><span class="comment"># 看看秦渊与各个美女之间的关系图</span></div><div class="line">nameAll &lt;- c(meiNv, <span class="string">"秦渊|凶兽"</span>)</div><div class="line"></div><div class="line"><span class="comment"># 互动关系</span></div><div class="line">num &lt;- length(nameAll)</div><div class="line">relation &lt;- matrix(data = rep(<span class="number">0</span>, num^<span class="number">2</span>), nrow = num)</div><div class="line">colnames(relation) &lt;- nameAll</div><div class="line">rownames(relation) &lt;- nameAll</div><div class="line"></div><div class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:(num - <span class="number">1</span>)) &#123;</div><div class="line">    <span class="keyword">for</span> (j <span class="keyword">in</span> (i + <span class="number">1</span>):num) &#123;</div><div class="line">        relation[i, j] &lt;- sum(str_detect(JSBW, paste0(<span class="string">"(("</span>, nameAll[[i]], <span class="string">").*("</span>, </div><div class="line">            nameAll[[j]], <span class="string">"))|(("</span>, nameAll[[j]], <span class="string">").*("</span>, nameAll[[i]], <span class="string">"))"</span>)))</div><div class="line">        relation[j, i] &lt;- relation[i, j]</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">library</span>(igraph, quietly = <span class="literal">TRUE</span>, warn.conflicts = <span class="literal">FALSE</span>)</div><div class="line"><span class="keyword">library</span>(ggthemes)</div><div class="line">g &lt;- graph_from_adjacency_matrix(relation, mode = <span class="string">"upper"</span>, diag = <span class="literal">FALSE</span>, weighted = <span class="literal">TRUE</span>)</div><div class="line">E(g)$width &lt;- E(g)$weight/<span class="number">500</span></div><div class="line">E(g)$color &lt;- tableau_seq_gradient_pal(<span class="string">"Red"</span>)(E(g)$weight/max(relation))</div><div class="line"><span class="comment"># E(g)$curved &lt;- 0.2</span></div><div class="line">temp &lt;- rowSums(relation)</div><div class="line">node.weight &lt;- temp/max(temp)</div><div class="line">V(g)$size &lt;- node.weight * <span class="number">20</span></div><div class="line">V(g)$label.dist &lt;- <span class="number">0.5</span></div><div class="line">V(g)$label.cex &lt;- <span class="number">0.7</span></div><div class="line"><span class="comment"># V(g)$color &lt;- tableau_seq_gradient_pal('Red')(node.weight)</span></div><div class="line">plot(g, layout = layout.circle, vertex.shape = <span class="string">"none"</span>)</div></pre></td></tr></table></figure>
<p><img src="/近身兵王2_files/figure-html/unnamed-chunk-7-1.png" alt=""></p>
<!-- -->
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># library(visNetwork) visIgraph(g) %&gt;% visIgraphLayout(layout =</span></div><div class="line"><span class="comment"># 'layout_in_circle' , smooth = FALSE, physics = FALSE) %&gt;%</span></div><div class="line"><span class="comment"># visOptions(highlightNearest = list(enabled = T, hover = T)) %&gt;%</span></div><div class="line"><span class="comment"># visInteraction(dragNodes = FALSE, dragView = FALSE, zoomView = TRUE) %&gt;%</span></div><div class="line"><span class="comment"># visNodes(borderWidthSelected = 10, labelHighlightBold = TRUE, font = '28px</span></div><div class="line"><span class="comment"># arial #458B00')</span></div></pre></td></tr></table></figure>
<h1 id="写在后面的话"><a href="#写在后面的话" class="headerlink" title="写在后面的话"></a>写在后面的话</h1><p>捣鼓了半天时间，大概了解的人物角色、场次与互动关系，选看了感兴趣章节，前面部分很不错，后面的剧情超出了所能理解的层次，果断终止，半天时间，到此结束。</p>
<p>明天生龙活虎！</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;写在前面的话&quot;&gt;&lt;a href=&quot;#写在前面的话&quot; class=&quot;headerlink&quot; title=&quot;写在前面的话&quot;&gt;&lt;/a&gt;写在前面的话&lt;/h1&gt;&lt;p&gt;前段时间比较辛苦，连着几周下来，终于该来的都来了，发烧、头疼加嗜睡，一样都不少，一天下来清醒的时候也不多，更新了个代码，还有点时间突然好想看个小说。
    
    </summary>
    
      <category term="string" scheme="http://yoursite.com/categories/string/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/string/R/"/>
    
    
      <category term="R 包" scheme="http://yoursite.com/tags/R-%E5%8C%85/"/>
    
      <category term="stringr" scheme="http://yoursite.com/tags/stringr/"/>
    
  </entry>
  
  <entry>
    <title>会议资料｜第九届中国R语言会议（上海）会议纪要</title>
    <link href="http://yoursite.com/2016/12/20/2016-SHA-R-Notes/"/>
    <id>http://yoursite.com/2016/12/20/2016-SHA-R-Notes/</id>
    <published>2016-12-19T16:00:00.000Z</published>
    <updated>2017-01-14T07:02:47.123Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://mp.weixin.qq.com/s?__biz=MjM5NDQ3NTkwMA==&mid=2650141713&idx=1&sn=24eff7ea76f847d2236dc671322e48e2&chksm=be866e0289f1e7140849ff3a8bde738ba09f73fcd6058a572b2edfcf0c7e76a237ca26672fbc&mpshare=1&scene=5&srcid=1221qXzgoMSM6nZ3egYLcsM9#rd" target="_blank">会议资料｜第九届中国R语言会议（上海）会议纪要</a></p>
<p><a href="./R-in-Reliability-SHA-2016-lxg.html" target="_blank">R make it Easier and Efficient in product reliability engineering</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s?__biz=MjM5NDQ3NTkwMA==&amp;mid=2650141713&amp;idx=1&amp;sn=24eff7ea76f847d2236dc671322e48e2&amp;chksm=be866e0289f1e71
    
    </summary>
    
      <category term="conference" scheme="http://yoursite.com/categories/conference/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/conference/R/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
      <category term="conference" scheme="http://yoursite.com/tags/conference/"/>
    
  </entry>
  
  <entry>
    <title>R Make It Easier and Efficient in Product Reliability Engineering</title>
    <link href="http://yoursite.com/2016/12/13/R-in-Reliability-SHA-2016-lxg/"/>
    <id>http://yoursite.com/2016/12/13/R-in-Reliability-SHA-2016-lxg/</id>
    <published>2016-12-12T16:00:00.000Z</published>
    <updated>2017-01-14T04:36:17.301Z</updated>
    
    <content type="html"><![CDATA[<p><a href="./R-in-Reliability-SHA-2016-lxg.html" target="_blank">R make it Easier and Efficient in product reliability engineering</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;./R-in-Reliability-SHA-2016-lxg.html&quot; target=&quot;_blank&quot;&gt;R make it Easier and Efficient in product reliability engineering&lt;/a&gt;&lt;/p&gt;

    
    </summary>
    
      <category term="conference" scheme="http://yoursite.com/categories/conference/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/conference/R/"/>
    
    
      <category term="R" scheme="http://yoursite.com/tags/R/"/>
    
      <category term="reliability" scheme="http://yoursite.com/tags/reliability/"/>
    
  </entry>
  
  <entry>
    <title>Extend the Modeling Output</title>
    <link href="http://yoursite.com/2016/12/03/extend-the-modeling-output2/"/>
    <id>http://yoursite.com/2016/12/03/extend-the-modeling-output2/</id>
    <published>2016-12-02T16:00:00.000Z</published>
    <updated>2017-01-14T04:57:09.972Z</updated>
    
    <content type="html"><![CDATA[<h2 id="General-modeling-output"><a href="#General-modeling-output" class="headerlink" title="General modeling output"></a>General modeling output</h2><p>Here is a linear regression model as an example.</p>
<a id="more"></a>
<h3 id="Raw-dataset"><a href="#Raw-dataset" class="headerlink" title="Raw dataset"></a>Raw dataset</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#&gt; # A tibble: 32 × 11</div><div class="line">#&gt;      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</div><div class="line">#&gt; *  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</div><div class="line">#&gt; 1   21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4</div><div class="line">#&gt; 2   21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4</div><div class="line">#&gt; 3   22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1</div><div class="line">#&gt; 4   21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1</div><div class="line">#&gt; 5   18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2</div><div class="line">#&gt; 6   18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1</div><div class="line">#&gt; 7   14.3     8 360.0   245  3.21 3.570 15.84     0     0     3     4</div><div class="line">#&gt; 8   24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2</div><div class="line">#&gt; 9   22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2</div><div class="line">#&gt; 10  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4</div><div class="line">#&gt; # ... with 22 more rows</div></pre></td></tr></table></figure>
<p>here we treat <code>mpg</code> as the dependent variable and the rest as the independent variables for regression modeling study.</p>
<h3 id="Raw-modeling-output"><a href="#Raw-modeling-output" class="headerlink" title="Raw modeling output"></a>Raw modeling output</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">#&gt; </div><div class="line">#&gt; Call:</div><div class="line">#&gt; lm(formula = mpg ~ qsec + factor(am) + wt + factor(gear), data = mtcars)</div><div class="line">#&gt; </div><div class="line">#&gt; Residuals:</div><div class="line">#&gt;     Min      1Q  Median      3Q     Max </div><div class="line">#&gt; -3.5064 -1.5220 -0.7517  1.3841  4.6345 </div><div class="line">#&gt; </div><div class="line">#&gt; Coefficients:</div><div class="line">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </div><div class="line">#&gt; (Intercept)     9.3650     8.3730   1.118  0.27359    </div><div class="line">#&gt; qsec            1.2449     0.3828   3.252  0.00317 ** </div><div class="line">#&gt; factor(am)1     3.1505     1.9405   1.624  0.11654    </div><div class="line">#&gt; wt             -3.9263     0.7428  -5.286 1.58e-05 ***</div><div class="line">#&gt; factor(gear)4  -0.2682     1.6555  -0.162  0.87257    </div><div class="line">#&gt; factor(gear)5  -0.2697     2.0632  -0.131  0.89698    </div><div class="line">#&gt; ---</div><div class="line">#&gt; Signif. codes:  0 &apos;***&apos; 0.001 &apos;**&apos; 0.01 &apos;*&apos; 0.05 &apos;.&apos; 0.1 &apos; &apos; 1</div><div class="line">#&gt; </div><div class="line">#&gt; Residual standard error: 2.55 on 26 degrees of freedom</div><div class="line">#&gt; Multiple R-squared:  0.8498,	Adjusted R-squared:  0.8209 </div><div class="line">#&gt; F-statistic: 29.43 on 5 and 26 DF,  p-value: 6.379e-10</div></pre></td></tr></table></figure>
<p>where you can see the statistical output, including the model significance, fit-of-goodness, residual and standard error, coefficients and according statistical test, and the modeling equation used. Generally that’s what we see from most of the software output. If you’re a good statistician it looks okay, but we can extend it a little further by transform the output.</p>
<h2 id="Extend-1-to-easy-the-multi-modeling-comparison"><a href="#Extend-1-to-easy-the-multi-modeling-comparison" class="headerlink" title="Extend 1: to easy the multi-modeling comparison"></a>Extend 1: to easy the multi-modeling comparison</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(broom)</div></pre></td></tr></table></figure>
<h3 id="tidy-the-output-into-a-data-table"><a href="#tidy-the-output-into-a-data-table" class="headerlink" title="tidy the output into a data table"></a>tidy the output into a data table</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#&gt;            term   estimate std.error  statistic      p.value</div><div class="line">#&gt; 1   (Intercept)  9.3650443 8.3730161  1.1184792 2.735903e-01</div><div class="line">#&gt; 2          qsec  1.2449212 0.3828479  3.2517387 3.168128e-03</div><div class="line">#&gt; 3   factor(am)1  3.1505178 1.9405171  1.6235455 1.165367e-01</div><div class="line">#&gt; 4            wt -3.9263022 0.7427562 -5.2861251 1.581735e-05</div><div class="line">#&gt; 5 factor(gear)4 -0.2681630 1.6554617 -0.1619868 8.725685e-01</div><div class="line">#&gt; 6 factor(gear)5 -0.2697468 2.0631829 -0.1307430 8.969850e-01</div></pre></td></tr></table></figure>
<h3 id="Glance-the-modeling-fit"><a href="#Glance-the-modeling-fit" class="headerlink" title="Glance the modeling fit"></a>Glance the modeling fit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#&gt;   r.squared adj.r.squared    sigma statistic      p.value df   logLik</div><div class="line">#&gt; 1 0.8498278     0.8209485 2.550272   29.4269 6.379318e-10  6 -72.0422</div><div class="line">#&gt;        AIC      BIC deviance df.residual</div><div class="line">#&gt; 1 158.0844 168.3446  169.101          26</div></pre></td></tr></table></figure>
<h2 id="Extend-2-to-prettify-the-output-for-report"><a href="#Extend-2-to-prettify-the-output-for-report" class="headerlink" title="Extend 2: to prettify the output for report"></a>Extend 2: to prettify the output for report</h2><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(pixiedust)</div></pre></td></tr></table></figure>
<!--html_preserve--><table align="center" style="border-collapse:collapse;"><br><tr><br><th colspan="1" ;="" rowspan="1" style="text-align:left;">Term</th><br><th colspan="1" ;="" rowspan="1" style="text-align:right;">Coefficient</th><br><th colspan="1" ;="" rowspan="1" style="text-align:right;">SE</th><br><th colspan="1" ;="" rowspan="1" style="text-align:right;">T-statistic</th><br><th colspan="1" ;="" rowspan="1" style="text-align:right;">P-value</th><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;">(Intercept)</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">9.365</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">8.373</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">1.118</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">0.27</td><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;background-color:rgba(218,112,214,.5);">qsec</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">1.245</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">0.383</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">3.252</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">0.003</td><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;">factor(am)1</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">3.151</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">1.941</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">1.624</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">0.12</td><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;background-color:rgba(218,112,214,.5);">wt</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">-3.926</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">0.743</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">-5.286</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;background-color:rgba(218,112,214,.5);">&lt; 0.001</td><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;">factor(gear)4</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">-0.268</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">1.655</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">-0.162</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">0.87</td><br></tr><br><tr><br><td colspan="1" ;="" rowspan="1" style="text-align:left;">factor(gear)5</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">-0.27</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">2.063</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">-0.131</td><br><td colspan="1" ;="" rowspan="1" style="text-align:right;">0.9</td><br></tr><br></table><br><br><br><!--/html_preserve-->
<p>Here we round the value to specified number of decimal places, changed the column names, modified the P value to an easy reading format, and added backgroud color to highlight the significant cofficients, and you can do more in your imagination since it’s HTML table and CSS can be customized by yourself. </p>
<p>Does it look good :) </p>
<h2 id="Citation"><a href="#Citation" class="headerlink" title="Citation"></a>Citation</h2><p>See details on the below two packages,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#&gt; </div><div class="line">#&gt; To cite package &apos;broom&apos; in publications use:</div><div class="line">#&gt; </div><div class="line">#&gt;   David Robinson (2016). broom: Convert Statistical Analysis</div><div class="line">#&gt;   Objects into Tidy Data Frames. R package version 0.4.1.</div><div class="line">#&gt;   https://CRAN.R-project.org/package=broom</div><div class="line">#&gt; </div><div class="line">#&gt; A BibTeX entry for LaTeX users is</div><div class="line">#&gt; </div><div class="line">#&gt;   @Manual&#123;,</div><div class="line">#&gt;     title = &#123;broom: Convert Statistical Analysis Objects into Tidy Data Frames&#125;,</div><div class="line">#&gt;     author = &#123;David Robinson&#125;,</div><div class="line">#&gt;     year = &#123;2016&#125;,</div><div class="line">#&gt;     note = &#123;R package version 0.4.1&#125;,</div><div class="line">#&gt;     url = &#123;https://CRAN.R-project.org/package=broom&#125;,</div><div class="line">#&gt;   &#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">#&gt; </div><div class="line">#&gt; To cite package &apos;pixiedust&apos; in publications use:</div><div class="line">#&gt; </div><div class="line">#&gt;   Benjamin Nutter (2016). pixiedust: Tables so Beautifully</div><div class="line">#&gt;   Fine-Tuned You Will Believe It&apos;s Magic. R package version 0.7.4.</div><div class="line">#&gt;   https://CRAN.R-project.org/package=pixiedust</div><div class="line">#&gt; </div><div class="line">#&gt; A BibTeX entry for LaTeX users is</div><div class="line">#&gt; </div><div class="line">#&gt;   @Manual&#123;,</div><div class="line">#&gt;     title = &#123;pixiedust: Tables so Beautifully Fine-Tuned You Will Believe It&apos;s Magic&#125;,</div><div class="line">#&gt;     author = &#123;Benjamin Nutter&#125;,</div><div class="line">#&gt;     year = &#123;2016&#125;,</div><div class="line">#&gt;     note = &#123;R package version 0.7.4&#125;,</div><div class="line">#&gt;     url = &#123;https://CRAN.R-project.org/package=pixiedust&#125;,</div><div class="line">#&gt;   &#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;General-modeling-output&quot;&gt;&lt;a href=&quot;#General-modeling-output&quot; class=&quot;headerlink&quot; title=&quot;General modeling output&quot;&gt;&lt;/a&gt;General modeling output&lt;/h2&gt;&lt;p&gt;Here is a linear regression model as an example.&lt;/p&gt;
    
    </summary>
    
      <category term="modeling" scheme="http://yoursite.com/categories/modeling/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/modeling/R/"/>
    
    
      <category term="R 包" scheme="http://yoursite.com/tags/R-%E5%8C%85/"/>
    
      <category term="pixiedust" scheme="http://yoursite.com/tags/pixiedust/"/>
    
  </entry>
  
  <entry>
    <title>一个好用的时间序列分析R包astsa</title>
    <link href="http://yoursite.com/2016/05/01/%E4%B8%80%E4%B8%AA%E5%A5%BD%E7%94%A8%E7%9A%84%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%88%86%E6%9E%90R%E5%8C%85astsa/"/>
    <id>http://yoursite.com/2016/05/01/一个好用的时间序列分析R包astsa/</id>
    <published>2016-04-30T16:00:00.000Z</published>
    <updated>2017-01-13T10:17:08.467Z</updated>
    
    <content type="html"><![CDATA[<h3 id="astsa-R包简介"><a href="#astsa-R包简介" class="headerlink" title="astsa R包简介"></a><code>astsa</code> R包简介</h3><p><a href="https://en.wikipedia.org/wiki/Time_series" target="_blank" rel="external">时间序列分析</a>在数据的趋势性分析、模式识别、信号提取和回归预报等方面应用非常广泛（如果你还没有尝试过此方面的分析，那就开始研究下周边的房价走势吧:)），得益于R的开源环境，已有大量的相关R包可供使用，详见<a href="https://cran.r-project.org/web/views/TimeSeries.html" target="_blank" rel="external">CRAN Task View: Time Series Analysis</a>.</p>
<a id="more"></a>
<p>今天推荐的R包<a href="https://cran.r-project.org/web/packages/astsa/index.html" target="_blank" rel="external">astsa</a>可以从CRAN下载安装，但可惜的是<a href="https://cran.r-project.org/web/views/TimeSeries.html" target="_blank" rel="external">CRAN Task View: Time Series Analysis</a>中对<code>astsa</code>包却只有寥寥几个字的介绍，难道是没发现它的好？本文档中介绍其几个非常棒的函数，具体信息参见该包的<a href="http://www.stat.pitt.edu/stoffer/tsa3" target="_blank" rel="external">astsa home page</a>上有详细的文档说明，还配套一个教材<strong>Time Series Analysis and Its Applications: With R Examples</strong>，书中的<a href="http://www.stat.pitt.edu/stoffer/tsa3/Rexamples.htm" target="_blank" rel="external">code</a>也已公开，非常方便于日常学习和实例操作，这儿必须有32个赞！</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 包安装</span></div><div class="line">install.packages(<span class="string">"astsa"</span>)</div></pre></td></tr></table></figure>
<h3 id="astsa-应用示例"><a href="#astsa-应用示例" class="headerlink" title="astsa 应用示例"></a><code>astsa</code> 应用示例</h3><h4 id="数据源说明"><a href="#数据源说明" class="headerlink" title="数据源说明"></a>数据源说明</h4><ul>
<li>真实工作中的数据通常来自于数据库实时读取，网络爬虫或本地数据的上传。该示例中采用一本地离线数据做演示，数据格式为*.csv文本；</li>
<li>CSV文本数据的读取函数可以用<code>read.csv()</code>, <code>read_csv()</code>, or <code>fread()</code>等函数，本实例中采用<code>read_csv()</code>做演示。</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(readr)</div><div class="line"></div><div class="line">df.raw &lt;- read_csv(<span class="string">"demoData.csv"</span>, col_types = list(</div><div class="line">  <span class="string">"time"</span> = col_datetime(format = <span class="string">"%Y/%m/%d %H:%M:%S"</span>)))</div><div class="line">str(df.raw)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">## Classes &apos;tbl_df&apos;, &apos;tbl&apos; and &apos;data.frame&apos;:	1408 obs. of  6 variables:</div><div class="line">##  $ time : POSIXct, format: &quot;2014-04-10 08:30:06&quot; &quot;2014-04-10 08:30:54&quot; ...</div><div class="line">##  $ data1: num  1.43 1.31 1.47 1.24 1.25 ...</div><div class="line">##  $ data2: num  0.34 0.278 0.209 0.132 0.281 0.324 0.308 0.412 0.236 0.234 ...</div><div class="line">##  $ data3: num  0.298 0.329 0.278 0.335 0.188 0.461 0.278 0.283 0.281 0.281 ...</div><div class="line">##  $ data4: num  1.37 1.13 1.39 1.18 1.22 ...</div><div class="line">##  $ data5: num  0.091 0.37 0.121 0.1 0.055 0.676 0.116 0.387 0.233 0.195 ...</div><div class="line">##  - attr(*, &quot;spec&quot;)=List of 2</div><div class="line">##   ..$ cols   :List of 6</div><div class="line">##   .. ..$ time :List of 1</div><div class="line">##   .. .. ..$ format: chr &quot;%Y/%m/%d %H:%M:%S&quot;</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_datetime&quot; &quot;collector&quot;</div><div class="line">##   .. ..$ data1: list()</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;</div><div class="line">##   .. ..$ data2: list()</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;</div><div class="line">##   .. ..$ data3: list()</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;</div><div class="line">##   .. ..$ data4: list()</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;</div><div class="line">##   .. ..$ data5: list()</div><div class="line">##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;</div><div class="line">##   ..$ default: list()</div><div class="line">##   .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_guess&quot; &quot;collector&quot;</div><div class="line">##   ..- attr(*, &quot;class&quot;)= chr &quot;col_spec&quot;</div></pre></td></tr></table></figure>
<h4 id="数据表整合"><a href="#数据表整合" class="headerlink" title="数据表整合"></a>数据表整合</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(tidyr)</div><div class="line">df.tidy &lt;- gather(df.raw, key=items, value=run_data, data1:data5)</div><div class="line">str(df.tidy)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">## Classes &apos;tbl_df&apos;, &apos;tbl&apos; and &apos;data.frame&apos;:	7040 obs. of  3 variables:</div><div class="line">##  $ time    : POSIXct, format: &quot;2014-04-10 08:30:06&quot; &quot;2014-04-10 08:30:54&quot; ...</div><div class="line">##  $ items   : chr  &quot;data1&quot; &quot;data1&quot; &quot;data1&quot; &quot;data1&quot; ...</div><div class="line">##  $ run_data: num  1.43 1.31 1.47 1.24 1.25 ...</div></pre></td></tr></table></figure>
<h4 id="原始数据图示"><a href="#原始数据图示" class="headerlink" title="原始数据图示"></a>原始数据图示</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(tseries)</div><div class="line"></div><div class="line"><span class="comment">### 不规则的时间序列数据</span></div><div class="line">ts.raw &lt;- irts(df.raw$time, as.matrix(df.raw[, -<span class="number">1</span>]))</div><div class="line">plot(ts.raw, main=<span class="string">"Raw Data"</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-5-1.png" title="plot of chunk unnamed-chunk-5" alt="plot of chunk unnamed-chunk-5" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 美图必用</span></div><div class="line"><span class="keyword">library</span>(ggplot2)</div><div class="line">plot.raw.1 &lt;- ggplot(df.tidy, aes(x=time, y=run_data, col=items)) + geom_point()</div><div class="line">plot.raw.1</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-5-2.png" title="plot of chunk unnamed-chunk-5" alt="plot of chunk unnamed-chunk-5" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">plot.raw.2 &lt;- ggplot(df.tidy, aes(x=run_data, fill=items)) + geom_density(alpha=<span class="number">.7</span>)</div><div class="line">plot.raw.2</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-5-3.png" title="plot of chunk unnamed-chunk-5" alt="plot of chunk unnamed-chunk-5" style="display: block; margin: auto;"></p>
<h4 id="趋势拟合"><a href="#趋势拟合" class="headerlink" title="趋势拟合"></a>趋势拟合</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ts.1 &lt;- irts(df.raw$time, as.matrix(df.raw[, <span class="number">2</span>]))</div><div class="line">time.1 &lt;- time(ts.1)</div><div class="line">value.1 &lt;- value(ts.1)</div><div class="line">plot(ts.1, type=<span class="string">"p"</span>, main=<span class="string">"Demo with 1st var"</span>)</div><div class="line">lines(ksmooth(time.1, value.1, <span class="string">"normal"</span>, bandwidth=<span class="number">5000</span>), col=<span class="string">"red"</span>, lwd=<span class="number">2</span>)  </div><div class="line">lines(supsmu(time.1, value.1, span=<span class="number">.5</span>), col=<span class="string">"blue"</span>, lwd=<span class="number">2</span>)  </div><div class="line">lines(lowess(value.1 ~ time.1, f=<span class="number">2</span>/<span class="number">3</span>), col=<span class="string">"green"</span>, lwd=<span class="number">2</span>)    </div><div class="line">lines(smooth.spline(time.1, value.1, spar=<span class="number">1</span>), col=<span class="string">"gold"</span>, lwd=<span class="number">2</span>)    </div><div class="line">abline(lm(value.1 ~ time.1), col=<span class="string">"black"</span>, lwd=<span class="number">2</span>)</div><div class="line">legend(<span class="string">"topright"</span>, legend=c(<span class="string">"ksmooth"</span>, <span class="string">"supsmu"</span>, <span class="string">"lowess"</span>, <span class="string">"smooth.spline"</span>, <span class="string">"lm"</span>), col = c(<span class="string">"red"</span>, <span class="string">"blue"</span>, <span class="string">"green"</span>, <span class="string">"gold"</span>, <span class="string">"black"</span>), lwd=<span class="number">2</span>, cex = <span class="number">0.6</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa//unnamed-chunk-6-1.png" title="plot of chunk unnamed-chunk-6" alt="plot of chunk unnamed-chunk-6" style="display: block; margin: auto;"></p>
<h4 id="查看LAG间的关系"><a href="#查看LAG间的关系" class="headerlink" title="查看LAG间的关系"></a>查看LAG间的关系</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">library</span>(xts)</div><div class="line"><span class="keyword">library</span>(astsa)</div><div class="line">ts.2 &lt;- as.xts(ts.1)</div><div class="line"></div><div class="line"><span class="comment">### 单变量</span></div><div class="line">lag1.plot(ts.2, max.lag = <span class="number">6</span>, corr = <span class="literal">TRUE</span>, smooth = <span class="literal">TRUE</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa//unnamed-chunk-7-1.png" title="plot of chunk unnamed-chunk-7" alt="plot of chunk unnamed-chunk-7" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 双变量间关系: lag2.plot()</span></div></pre></td></tr></table></figure>
<h4 id="ARIMA-模型拟合与预测"><a href="#ARIMA-模型拟合与预测" class="headerlink" title="ARIMA 模型拟合与预测"></a>ARIMA 模型拟合与预测</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plot.acf &lt;- acf2(ts.2)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa//unnamed-chunk-8-1.png" title="plot of chunk unnamed-chunk-8" alt="plot of chunk unnamed-chunk-8" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fit.sarima.1 &lt;- sarima(ts.2, p=<span class="number">6</span>, d=<span class="number">0</span>, q=<span class="number">0</span>, details = <span class="literal">FALSE</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa//unnamed-chunk-9-1.png" title="plot of chunk unnamed-chunk-9" alt="plot of chunk unnamed-chunk-9" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fit.sarima.1$fit</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">## </div><div class="line">## Call:</div><div class="line">## stats::arima(x = xdata, order = c(p, d, q), seasonal = list(order = c(P, D, </div><div class="line">##     Q), period = S), xreg = xmean, include.mean = FALSE, optim.control = list(trace = trc, </div><div class="line">##     REPORT = 1, reltol = tol))</div><div class="line">## </div><div class="line">## Coefficients:</div><div class="line">##          ar1     ar2     ar3     ar4     ar5     ar6   xmean</div><div class="line">##       0.0316  0.1178  0.0272  0.0888  0.0657  0.1121  1.4607</div><div class="line">## s.e.  0.0265  0.0264  0.0265  0.0265  0.0265  0.0266  0.0064</div><div class="line">## </div><div class="line">## sigma^2 estimated as 0.01772:  log likelihood = 841.4,  aic = -1666.81</div></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fore.2 &lt;- sarima.for(ts.2, n.ahead=<span class="number">20</span>, p=<span class="number">6</span>, d=<span class="number">0</span>, q=<span class="number">0</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-10-1.png" title="plot of chunk unnamed-chunk-10" alt="plot of chunk unnamed-chunk-10" style="display: block; margin: auto;"></p>
<h4 id="频谱分析与信号提取"><a href="#频谱分析与信号提取" class="headerlink" title="频谱分析与信号提取"></a>频谱分析与信号提取</h4><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ts.3 &lt;- as.xts(ts.raw)</div><div class="line">mvspec(ts.3, spans = <span class="number">20</span>, log=<span class="string">"no"</span>)</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-11-1.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" style="display: block; margin: auto;"></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SigExtract(ts.3)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">## The filter coefficients are </div><div class="line">##         s          a(s)</div><div class="line">##  [1,]   0  8.000000e-02</div><div class="line">##  [2,]  -1  7.810597e-02</div><div class="line">##  [3,]  -2  7.258885e-02</div><div class="line">##  [4,]  -3  6.392528e-02</div><div class="line">##  [5,]  -4  5.285104e-02</div><div class="line">##  [6,]  -5  4.028083e-02</div><div class="line">##  [7,]  -6  2.721038e-02</div><div class="line">##  [8,]  -7  1.461279e-02</div><div class="line">##  [9,]  -8  3.341906e-03</div><div class="line">## [10,]  -9 -5.946299e-03</div><div class="line">## [11,] -10 -1.284528e-02</div><div class="line">## [12,] -11 -1.721763e-02</div><div class="line">## [13,] -12 -1.918221e-02</div><div class="line">## [14,] -13 -1.907220e-02</div><div class="line">## [15,] -14 -1.737134e-02</div><div class="line">## [16,] -15 -1.463808e-02</div><div class="line">## [17,] -16 -1.142862e-02</div><div class="line">## [18,] -17 -8.229104e-03</div><div class="line">## [19,] -18 -5.405759e-03</div><div class="line">## [20,] -19 -3.178390e-03</div><div class="line">## [21,] -20 -1.619119e-03</div><div class="line">## [22,] -21 -6.743622e-04</div><div class="line">## [23,] -22 -2.046001e-04</div><div class="line">## [24,] -23 -3.403312e-05</div><div class="line">## [25,] -24 -9.669615e-07</div><div class="line">## for s &gt;=0; and a(-s) = a(s).</div></pre></td></tr></table></figure>
<p><img src="/figure/一个好用的时间序列分析R包astsa/unnamed-chunk-11-2.png" title="plot of chunk unnamed-chunk-11" alt="plot of chunk unnamed-chunk-11" style="display: block; margin: auto;"></p>
<center><img src="/figure/一个好用的时间序列分析R包astsa/filterfun.png" alt=""></center><br><center><img src="/figure/一个好用的时间序列分析R包astsa/filteredseries.png" alt=""></center><br><center><img src="/figure/一个好用的时间序列分析R包astsa/after filter.png" alt=""></center>



<p><strong>Note:</strong> <code>SigExtract()</code>具有非常好的滤波与信号提取功能，可自动输出三张图：</p>
<ol>
<li>the original and filtered series, </li>
<li>the estiamted spectra of each series, </li>
<li>the filter coefficients and the desired and attained frequency response function.</li>
</ol>
<p>但因为它同时使用了三个不同的图形窗口输出，导致三张图无法直接输出到markdown中（如果哪位高手已解决了该问题请反馈给我^_^），应用时可以复制/粘贴到所需要的地方，或者导出为外部图片做后续应用，此文档中采用了后者方法。</p>
<h4 id="应用小结"><a href="#应用小结" class="headerlink" title="应用小结"></a>应用小结</h4><p>上面介绍的是该包中最常用的几个特色函数，应用简单、输出友好，但可以解决日常70-80%的问题，余下来的那20%，就请学习它的配套教材<em>Time Series Analysis and Its Applications: With R Examples</em>吧。</p>
<p>虽然本文意在推荐<code>astsa</code>，但应用中也必然用到了很多其它包的支持（见代码），在众多R包中如何选择合适的包并组合应用，实属仁者见仁智者见智，大家的原料一样，但却可以做出不同的工作，站在巨人的肩上思考创新，这也正是应用R的魅力所在。</p>
<h3 id="引用说明"><a href="#引用说明" class="headerlink" title="引用说明"></a>引用说明</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">citation(<span class="string">"astsa"</span>)</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">## </div><div class="line">## To cite package &apos;astsa&apos; in publications use:</div><div class="line">## </div><div class="line">##   David Stoffer (2016). astsa: Applied Statistical Time Series</div><div class="line">##   Analysis. R package version 1.6.</div><div class="line">##   https://CRAN.R-project.org/package=astsa</div><div class="line">## </div><div class="line">## A BibTeX entry for LaTeX users is</div><div class="line">## </div><div class="line">##   @Manual&#123;,</div><div class="line">##     title = &#123;astsa: Applied Statistical Time Series Analysis&#125;,</div><div class="line">##     author = &#123;David Stoffer&#125;,</div><div class="line">##     year = &#123;2016&#125;,</div><div class="line">##     note = &#123;R package version 1.6&#125;,</div><div class="line">##     url = &#123;https://CRAN.R-project.org/package=astsa&#125;,</div><div class="line">##   &#125;</div><div class="line">## </div><div class="line">## ATTENTION: This citation information has been auto-generated from</div><div class="line">## the package DESCRIPTION file and may need manual editing, see</div><div class="line">## &apos;help(&quot;citation&quot;)&apos;.</div></pre></td></tr></table></figure>
<hr>
<p>阿广Max，数据分析与应用爱好者，<a href="&#109;&#x61;&#105;&#108;&#116;&#x6f;&#58;&#x78;&#x69;&#x6e;&#103;&#117;&#x61;&#110;&#x67;&#x5f;&#x6c;&#x69;&#x75;&#64;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;">&#x78;&#x69;&#x6e;&#103;&#117;&#x61;&#110;&#x67;&#x5f;&#x6c;&#x69;&#x75;&#64;&#x31;&#x36;&#x33;&#x2e;&#x63;&#x6f;&#109;</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;astsa-R包简介&quot;&gt;&lt;a href=&quot;#astsa-R包简介&quot; class=&quot;headerlink&quot; title=&quot;astsa R包简介&quot;&gt;&lt;/a&gt;&lt;code&gt;astsa&lt;/code&gt; R包简介&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Time_series&quot;&gt;时间序列分析&lt;/a&gt;在数据的趋势性分析、模式识别、信号提取和回归预报等方面应用非常广泛（如果你还没有尝试过此方面的分析，那就开始研究下周边的房价走势吧:)），得益于R的开源环境，已有大量的相关R包可供使用，详见&lt;a href=&quot;https://cran.r-project.org/web/views/TimeSeries.html&quot;&gt;CRAN Task View: Time Series Analysis&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
      <category term="time-series" scheme="http://yoursite.com/categories/time-series/"/>
    
      <category term="R" scheme="http://yoursite.com/categories/time-series/R/"/>
    
    
      <category term="R 包" scheme="http://yoursite.com/tags/R-%E5%8C%85/"/>
    
      <category term="astsa" scheme="http://yoursite.com/tags/astsa/"/>
    
  </entry>
  
</feed>
